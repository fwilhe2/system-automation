---
- name: Ensure `~/software` directory exists
  file:
    path: ~/software
    state: directory
    mode: "750"

- name: Clone `fwilhe/bin` Repository
  git:
    repo: https://github.com/fwilhe2/bin.git
    dest: ~/software/fwilhe-bin

- name: Install Development Tools
  unarchive:
    src: "{{ item }}"
    dest: ~/software/
    remote_src: true
  loop: "{{ development_tools['linux'] }}"

- name: Install Rust
  command: bash -c "curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y"
  changed_when: false

- name: Ensure `~/bin` directory exists
  file:
    path: ~/bin
    state: directory
    mode: "750"

- name: Install Cli Tools
  unarchive:
    src: "{{ item }}"
    dest: ~/bin/
    remote_src: true
  with_items:
    - https://github.com/r-darwish/topgrade/releases/download/{{ TOPGRADE_VERSION }}/topgrade-{{ TOPGRADE_VERSION }}-x86_64-unknown-linux-gnu.tar.gz

- name: Update Path
  template:
    dest: ~/.custom-path.sh
    src: custom-path.sh.j2
    mode: "750"
